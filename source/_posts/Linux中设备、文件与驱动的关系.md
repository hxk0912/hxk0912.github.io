---
title: Linux中设备、文件与驱动的关系
categories: Linux
date: 2020-02-18 12:39:13
tags:
---

转自
[野火Linux教程](http://tutorial.linux.doc.embedfire.com/zh_CN/latest/linux_basis/led_key_command_line_testing.html#sys)

控制时我们根本不需要知道LED灯和按键的具体硬件连接，只要知道哪个文件代表哪个设备，然后就可以通过文件以同样的方式操控同类设备了。这就是驱动的作用，它把硬件设备与Linux文件建立了映射关系。

在MCU的裸机程序中，要控制LED灯和按键，需要先了解它们与MCU硬件是如何连接的，即要知道连接的具体的IO引脚，然后修改寄存器配置IO的输入输出，工作模式等，最后编写相关的控制函数API提供给上层调用。编写应用时用户通过函数API去控制硬件。

在Linux系统下，驱动工程师的工作其实类似，他们也需要了解LED或按键是如何与CPU连接的，也得配置好IO的工作模式，区别在于还需要按照Linux系统的接口要求编写相关控制函数提供给Linux的虚拟文件系统，使得硬件与文件建立起联系，提供给Linux用户。编写应用时用户通过设备文件即可控制硬件。

所以说，驱动工程师所做的工作就是把硬件的控制方式抽象、封装成为函数API或者文件，只不过Linux驱动工程师在封装时需要按照Linux的规范去编写，而且在编写时需要了解Linux内核的一些机制，所以相对裸机驱动来说，提出了更高的要求。

