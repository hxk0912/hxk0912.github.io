---
title: Verilog HDL语法
date: 2019-12-22 12:27:10
categories: FPGA
tags:
---


## Verilog简述

Verilog是一种硬件描述语言，以文本形式来描述数字系统硬件的结构和行为的语言，用它可以表示逻辑电路图、逻辑表达式，还可以表示数字逻辑系统所完成的逻辑功能。

### Verilog和C的区别

Verilog是硬件描述语言，在编译下载到FPGA之后，会生成电路，所以Verilog全部是并行处理与运行的；C语言是软件语言，编译下载到单片机/CPU之后，还是软件指令，而不会根据你的代码生成相应的硬件电路，而单片机/CPU处理软件指令需要取址、译码、执行，是串行执行的。
Verilog和C的区别也是FPGA和单片机/CPU的区别，由于FPGA全部并行处理，所以处理速度非常快，这个是FPGA的最大优势，这一点是单片机/CPU替代不了的。

## Verilog基础知识

### Verilog逻辑值

0、1、X、Z与数电中讲述相同

## Verilog的标识符

与C大同小异，**注意的是标识符区分大小写。**

*不建议大小写混合使用，普通内部信号建议全部小写，参数定义建议大写，另外信号命名最好体现信号的含义。*

## Verilog数字进制格式

包括二进制、八进制、十进制、十六进制。

表示方法如下：

4' b0101 表示四位二进制数字0101

4' d2    表示四位十进制数字2

4' ha    表示四位十六进制数字a

*当代码中没有指定数字的位宽与进制时，默认为32位的十进制，比如100，实际上表示的值为32’d100。*

## Verilog的数据类型

主要有三大类数据类型，即寄存器类型、线网类型和参数类型。从名称中，我们可以看出，真正在数字电路中起作用的数据类型应该是寄存器类型和线网类型。

### 寄存器类型

寄存器类型表示一个抽象的数据存储单元，它只能在always语句和initial语句中被赋值，并且它的值从一个赋值到另一个赋值过程中被保存下来。如果该过程语句描述的是时序逻辑，即always语句带有时钟信号，则该寄存器变量对应为寄存器；如果该过程语句描述的是组合逻辑，即always语句不带有时钟信号，则该寄存器变量对应为硬件连线；寄存器类型的缺省值是x（未知状态）。

``` verilog
reg [31:0] delay_cnt; //延时计数器 
reg key_flag ; //按键标志
```

### 线网类型

线网表示Verilog结构化元件间的物理连线。它的值由驱动元件的值决定，例如连续赋值或门的输出。如果没有驱动元件连接到线网，线网的缺省值为z（高阻态）。

``` verilog
wire data_en; //数据使能信号 
wire [7:0] data ; //数据
```

### 参数类型

我们再来看下参数类型，参数其实就是一个常量，常被用于定义状态机的状态、数据位宽和延迟大小等，由于它可以在编译时修改参数的值，因此它又常被用于一些参数可调的模块中，使用户在实例化模块时，可以根据需要配置参数。在定义参数时，我们可以一次定义多个参数，参数与参数之间需要用逗号隔开。这里我们需要注意的是参数的定义是局部的，只在当前模块中有效。

``` verilog
parameter DATA_WIDTH = 8; //数据位宽为8位
```

## Verilog的运算符

大部分运算符都是与C完全相同的，但是Verilog中有一个特殊的运算符是C语言中没有的，就是**位拼接运算符**。用这个运算符可以把两个或多个信号的某些位拼接起来进行运算操作。

符号|使用方法|说明
-|-|-
{}|{a,b}|将 a 和 b 拼接起来，作为一个新信号

## Verilog关键字

关键字|含义
-|-
module|模块开始定义
input|输入端口定义
output|输出端口定义
inout|双向端口定义
parameter|信号的参数定义
wire|wire信号定义
reg|reg信号定义
always|产生reg信号语句的关键字
assign|产生wire信号语句的关键字
begin|语句的起始标志
end|语句的结束标志
posedge/negedge|时序电路的标志
case|Case语句起始标记
endcase|Case语句结束标记
endmodule|模块结束定义

## Verilog高级知识点

### 阻塞赋值

阻塞赋值，顾名思义，即在一个always块中，后面的语句会受到前语句的影响，具体来说，在同一个always中，一条阻塞赋值语句如果没有执行结束，那么该语句后面的语句就不能被执行，即被“阻塞”。也就是说always块内的语句是一种顺序关系，这里和C语言很类似。符号“=”用于阻塞的赋值（如:b = a;），阻塞赋值“=”在begin和end之间的语句是顺序执行，属于串行语句。

### 非阻塞赋值

符号“<=”用于非阻塞赋值（如:b <= a;），非阻塞赋值是由时钟节拍决定，在时钟上升到来时，执行赋值语句右边，然后将begin-end之间的所有赋值语句同时赋值到赋值语句的左边，注意：是begin—end之间的所有语句，一起执行，且一个时钟只执行一次，属于并行执行语句。这个是和C语言最大的一个差异点，大家要逐步理解并行执行的概念。