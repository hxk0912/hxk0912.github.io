---
title: 外部中断
date: 2020-07-19 16:07:10
categories: STM32底层
tags:
---

## cubemx配置

1. 配置需要外部中断的管脚位GPIO_EXTI模式
2. GPIO中选择该引脚外部中断的触发模式
3. 在NVIC中使能EXTI中断

## MDK代码

在gpio.c中添加如下，注意这里延时要用累加变量的粗延时。

``` c
void delay_ms(uint16_t time)
{    
   uint16_t i=0;  
   while(time--)
   {
      i=12000;  //????
      while(i--) ;    
   }
}

void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
{
	delay_ms(10);
	if(GPIO_Pin == KEY_Pin)
	{
		HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);
	}
}


```