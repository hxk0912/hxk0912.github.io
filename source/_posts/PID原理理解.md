---
title: PID原理理解
date: 2019-11-07 20:56:49
categories: 算法
tags:
---

## 什么是PID

PID(proportion integration differentiation)其实就是指比例，积分，微分控制。

**离散型PID公式：**
Uk=KP*[E(k)]+KI*∑E(k)+KD*[E(k)-E(k-1)]

**增量型PID公式：**
ΔUk=Uk+KP*[E(k)-E(k-1)]+KI*∑E(k)+KD*[E(k)-2E(k-1)+E(k-2)]

增量性可以理解为离散型求增量。

## 各项系数理解

### Kp

P指比例，用的是比例控制算法。举个例子，小明希望往一个水桶里装指定容量的水，可是他手头没有工具可以知道准确容量，只能凭自己的感觉来装，但是水桶上有刻度线所以小明知道他现在装了多少。比如小明希望装水装到10升，一开始小明知道自己差10升水，他希望慢慢装满这桶水，第一次就装了8升，也就是0.8\*10升，然后小明看还差2升，他又装了一点，这一次根据这一次的误差2升装了1.6升，就是0.8\*2升,这个比例系数0.8就是Kp，指的就是增量与误差成比例关系。

Kp的大小对于PID控制的影响：Kp太小的话，沿用上面的例子就是小明每次装了0.2倍的误差量，那么小明要装满所需要的时间就会特别长。而如果Kp太大，那么比如小明一次装了1.2倍那么一下就过头了，那么就要再减，这会造成水位一直在10升左右抖动。

### Ki

I指积分，用的是积分控制算法。继续说如果小明所装的水桶漏水，假设小明装到9升的时候，他下次要装0.8升，当他装进去之后，桶恰好漏了0.8升，这又回到了9升，那么小明的Kp不变的话，就永远装不满。而如果加入了Ki呢？每次还会加入一个不断累加的变量，那么就算上述过程始终发生着，因为这个累加量，桶里的水总是越来越多的，这样小明就可以装满水了。

Ki所乘的系数是所有误差量的累加值。

### Kd

D指微分，用的是微分控制算法。假设小明装水马上就要装满了，那么误差总是一次次减少的，那么E(k)-E(k-1)总是小于0的，这起到了一控速的作用，比如说水位现在很接近10升了，但是每次的装水量还是很大那么这时候两次的误差的差值就会很大，那么下一次装水量就会急剧减小，不至于超出了10升，同样的如果很接近10升但是装水量很小的话，那么这个D项对应值会不断减小。直到装满，并且也不会让水位超出10升。

